{% extends "base.html" %}


{% block page_title %}Our Events | {{ SITE_INFO.site_name }}{% endblock %}

{% block body_attributes %}class="python events{% if not featured %} default-page{% endif %}"{% endblock %}


{% block header_content %}
    {% if featured %}
                <div class="featured-event">
                
                    <h2 class="welcome-message">Featured Python Event</h2>
                
                    <h1 class="call-to-action">{{ featured.title|striptags }}</h1>
                    
                    <p class="event-date"><time datetime="{{ featured.next_datetime.dt_start|date:'c' }}">
                        {{ featured.next_datetime.dt_start|date:"l, F d, Y" }}
                    </time></p>
                    <p class="excerpt">{{ featured.description.rendered|striptags|truncatewords:"60" }} <a class="readmore" href="{{ featured.get_absolute_url }}">Read more</a></p>
                </div>
    {% endif %}
{% endblock header_content %}



{% block content_attributes %}with-right-sidebar{% endblock %}

{# Based on python/events.html #}

{% block content %}
                <div class="most-recent-events">
                    <div class="shrubbery">
                        <h2 class="widget-title"><span aria-hidden="true" class="icon-calendar"></span>Upcoming Events</h2>
                        {% if page_obj.has_next %}
                        <p class="give-me-more"><a href="?page={{ page_obj.next_page_number }}" title="More Events">More</a></p>
                        {% endif %}
                        <ul class="list-recent-events menu">
                        {% for object in object_list %}
                            <li>
                                <h3 class="event-title"><a href="{{ object.get_absolute_url }}">{{ object.title|striptags }}</a></h3>
                                <p>
                                    {% with object.next_time as next_time %}
                                    {% if next_time.single_day %}
                                    <time datetime="{{ next_time.dt_start|date:'c' }}">{{ next_time.dt_start|date:"d N" }}<span class="say-no-more"> {{ next_time.dt_start|date:"Y" }}</span> {{ next_time.dt_start|date:"fA"|lower }}{% if next_time.valid_dt_end %} â€“ {{ next_time.dt_end|date:"fA"|lower }}{% endif %}</time> 
                                    {% else %}
                                    <time datetime="{{ next_time.dt_start|date:'c' }}">{{ next_time.dt_start|date:"d N" }}{% if next_time.valid_dt_end %} &ndash; {{ next_time.dt_end|date:"d N" }}{% endif %} <span class="say-no-more"> {{ next_time.dt_end|date:"Y" }}</span></time> 
                                    {% endif %}

                                    {% if object.venue %}
                                    <span class="event-location">{% if object.venue.url %}<a href="{{ object.venue.url }}">{% endif %}{{ object.venue.name }}{% if object.venue.url %}</a>{% endif %}{% if object.venue.address %}, {{ object.venue.address }}{% endif %}</span>
                                    {% endif %}
                                    {% endwith %}
                                </p>
                            </li>
                        {% endfor %}
                        </ul>
                    </div>
                    
                
                    <h3 class="widget-title just-missed">You just missed...</h3>
                    <ul class="list-recent-events menu">
                        <li>
                            <h3 class="event-title"><a href="#">Python Brazil 2012</a></h3>
                            <p>
                                <time datetime="2012-11-21/2012-11-24">21 &ndash; 24 Nov <span class="say-no-more"> 2012</span></time> 
                                <span class="event-location">Rio de Janeiro, Brazil</span>
                            </p>
                        </li>
                        <li>
                            <h3 class="event-title"><a href="#">RuPy 2012 &ndash; Brno Edition</a></h3>
                            <p>
                                <time datetime="2012-11-16/2012-11-18">16 &ndash; 18 Nov <span class="say-no-more"> 2012</span></time> 
                                <span class="event-location">Brno, Czech Republic</span>
                            </p>
                        </li>
                    </ul>
                </div>
{% endblock content %}



{% block right_sidebar %}
            <aside class="right-sidebar" role="secondary">
                {% if event_categories %}
                <div class="sidebar-widget eventtypes-widget">
                    <h2 class="widget-title">Event Categories</h2>
                    <p class="give-me-more"><a href="#" title="More Event Categories">More</a></p>
                    <ul class="menu">
                        {% for category in event_categories %}
                        <li><a href="{{ category.get_absolute_url }}">{{ category.name }}</a></li>
                        {% endfor %}
                        <li><a class="readmore" href="{% url 'events:eventcategory_list' calendar_slug=view.kwargs.calendar_slug %}">More Types</a></li>
                    </ul>
                </div>
                {% endif %}

                {% if event_locations %}
                <div class="sidebar-widget authors-widget">
                    <h2 class="widget-title">Event Locations</h2>
                    <p class="give-me-more"><a href="#" title="More Event Locations">More</a></p>
                    <ul class="menu">
                        {% for location in event_locations %}
                        <li><a href="{{ location.get_absolute_url }}">{{ location.name }}</a></li>
                        {% endfor %}
                       <li><a class="readmore" href="{% url 'events:eventlocation_list' calendar_slug=view.kwargs.calendar_slug %}">More Locations</a></li>
                    </ul>
                </div>
                {% endif %}

                <div class="sidebar-widget subscribe-widget">
                    <h2 class="widget-title">Python Event Subscriptions</h2>
                    <p>Subscribe to Python Event Calendars:</p>
                    <ul class="menu">
                        <li><a href="#"><span aria-hidden="true" class="icon-feed"></span>Events via RSS</a></li>
                        <li><a href="#"><span aria-hidden="true" class="icon-mail-2"></span>Events by Email</a></li>
                        <li><a href="#"><span aria-hidden="true" class="icon-twitter"></span>Events on Twitter</a></li>
                    </ul>
                    <p>Subscribe to Local Python Calendars:</p>
                    <ul class="menu">
                        <li><a href="#"><span aria-hidden="true" class="icon-feed"></span>List of RSS feeds by Locality</a></li>
                        <li><a href="#"><span aria-hidden="true" class="icon-mail-2"></span>List of Email feeds by Locality</a></li>
                    </ul>
                </div>
                
            </aside>
{% endblock right_sidebar %}